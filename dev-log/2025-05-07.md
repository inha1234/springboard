작업목록

-댓글 작성 기능

-토큰 파싱 서비스->컨트롤러로 리팩토링

개발 메모장

토큰 파싱하는 작업을 컨트롤러에서 하느냐 서비스에서 하느냐에 대한 고민
컨트롤러에서는 클라이언트에서 주는 정보를 받기만하고 서비스에 넘겨주고 서비스는 실제 처리
로직을 하는게 책임 분리 원칙에 부합하는 걸로 생각하고있었으나 알아본 바로는 컨트롤에서
토큰 파싱 작업을 하는게 책임 분리 원칙에 부합하며 이외에도 여러가지 장점이 있었음

1.책임 분리 원칙에 부합

컨트롤러에서 토큰을 파싱하는 작업이 책임 분리에서 더 올바르다고 함.
서비스는 비즈니스 로직만 담당하고, 인증 관련 처리는 컨트롤러나 필터에서 끝내는게 더
깔끔하다고함

2.테스트 편의성 향상

테스트 편의성에서도 서비스에서 username을 파라미터로 받으면 단위 테스트 할 때 토큰 없이
테스트가 가능하다는 이점도 있다고함

3.보안 흐름의 명확화

또한 보안 흐름의 명확화의 이점이 있다고하는데 토큰 검증 실패 시 401 Unauthorized를
반환하는 흐름을 컨트롤러나 필터에 단계에서 처리하기 유리하다는 데 이 부분은 아직

잘 모르겠음

4.프레임워크 권장 방식에 부합

마지막으로 프레임워크 권장 방식으로도 컨트롤러단에서 처리하는게 맞다고함.
Spring Security나 OAuth 같은 보안 프레임워크들도
인증 관련 처리를 필터나 컨트롤러 단에서 마무리하고
서비스 단에서는 인증 객체(SecurityContext 등)를 주입해서
별도 처리가 없도록 설계하는 방식을 지향한다고함.

Service는 username이 유효하다는 전제하에 비즈니스만 담당하는게 맞다고함.