작업목록

- 작성자 본인 여부 확인 기능 전역화 에러 메시지 작업
```
가드에서 직접 에러를 던지면 어떻까 하고 작업 해보았는데 

    public boolean postOwner(Long postId, Authentication authentication) {
        String username = ((AuthUser) authentication.getPrincipal()).getUsername();
        return postRepository.existsByIdAndUser_Username(postId, username);
    }

해당 코드를

   public boolean postOwner(Long postId, Authentication authentication) {
        String username = ((AuthUser) authentication.getPrincipal()).getUsername();
        boolean owns = postRepository.existsByIdAndUser_Username(postId, username);
        if (!owns) {
            throw new org.springframework.security.access.AccessDeniedException("게시글 권한 없음");
        }
        return true
        }
이런식으로 내부에서 다른 작성자면 던지는 식으로 해보았는데도 500에러가 발생함
```
```
핸들러 쪽에
    //403
    @ExceptionHandler(org.springframework.security.access.AccessDeniedException.class)
    public ResponseEntity<ErrorResponse> handleAccessDenied(
            org.springframework.security.access.AccessDeniedException ex) {
        return ResponseEntity
                .status(HttpStatus.FORBIDDEN)
                .body(ErrorResponse.of(ErrorCode.FORBIDDEN));
    }

    //401
    @ExceptionHandler(org.springframework.security.core.AuthenticationException.class)
    public ResponseEntity<ErrorResponse> handleAuth(
            org.springframework.security.core.AuthenticationException ex) {
        return ResponseEntity
                .status(HttpStatus.UNAUTHORIZED)
                .body(ErrorResponse.of(ErrorCode.UNAUTHORIZED));
    }
해당 코드들 추가하니깐 정상적으로 401 / 403 에러 뱉기 시작함
```
개발 메모장